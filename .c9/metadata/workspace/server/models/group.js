{"filter":false,"title":"group.js","tooltip":"/server/models/group.js","undoManager":{"mark":40,"position":40,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":1,"column":43},"action":"insert","lines":["var pg            = require(\"pg\");","var database      = require('../database');"]}]}],[{"group":"doc","deltas":[{"start":{"row":35,"column":4},"end":{"row":35,"column":7},"action":"insert","lines":["// "]},{"start":{"row":36,"column":4},"end":{"row":36,"column":7},"action":"insert","lines":["// "]},{"start":{"row":37,"column":4},"end":{"row":37,"column":7},"action":"insert","lines":["// "]},{"start":{"row":39,"column":4},"end":{"row":39,"column":7},"action":"insert","lines":["// "]},{"start":{"row":40,"column":4},"end":{"row":40,"column":7},"action":"insert","lines":["// "]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":4},"end":{"row":50,"column":8},"action":"insert","lines":["    pg.connect(database.url_pg, function(err, client, done){","\t","    \tif(err){","    \t\tconsole.log('connection error (Postgres):'+err);","    \t}","    \t//get data","    \tconsole.log(user.id);","    \tclient.query('select \"GroupId\" from \"GroupsUsers\" where \"UserId\"=$1',[user.id], function(err, result){","    \t  if(err){ console.log(err)}","    \t  done();","    \t  arrGrId = result.rows.map(function(object){return object.GroupId});","    \t  groupModel.find({ id: { $in: arrGrId }  }, function(err, groups) {","          if (err) return callback(\"GroupDbError\");","          ","          callback(null, groups);","        });","    \t});"]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":6},"end":{"row":34,"column":8},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":4},"end":{"row":34,"column":6},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":4},"end":{"row":35,"column":0},"action":"insert","lines":["",""]},{"start":{"row":35,"column":0},"end":{"row":35,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":35,"column":59},"end":{"row":35,"column":60},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":36,"column":1},"end":{"row":37,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":36,"column":1},"end":{"row":36,"column":2},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":36,"column":12},"end":{"row":36,"column":13},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":0},"end":{"row":39,"column":15},"action":"remove","lines":["    \t//get data"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":0},"end":{"row":40,"column":26},"action":"remove","lines":["    \tconsole.log(user.id);"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":0},"end":{"row":41,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":14},"end":{"row":41,"column":15},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":33},"end":{"row":41,"column":34},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":35},"end":{"row":41,"column":36},"action":"insert","lines":["$"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":35},"end":{"row":41,"column":36},"action":"remove","lines":["$"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":35},"end":{"row":41,"column":36},"action":"insert","lines":[":"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":35},"end":{"row":41,"column":36},"action":"remove","lines":[":"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":35},"end":{"row":41,"column":36},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":35},"end":{"row":41,"column":36},"action":"remove","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":106},"end":{"row":40,"column":107},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":74},"end":{"row":40,"column":75},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":7},"end":{"row":43,"column":8},"action":"insert","lines":["v"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":8},"end":{"row":43,"column":9},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":9},"end":{"row":43,"column":10},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":10},"end":{"row":43,"column":11},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":53},"end":{"row":43,"column":54},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":55},"end":{"row":43,"column":56},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":77},"end":{"row":43,"column":78},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":7},"end":{"row":44,"column":0},"action":"insert","lines":["",""]},{"start":{"row":44,"column":0},"end":{"row":44,"column":7},"action":"insert","lines":["    \t  "]}]}],[{"group":"doc","deltas":[{"start":{"row":50,"column":5},"end":{"row":50,"column":6},"action":"insert","lines":["0"]}]}],[{"group":"doc","deltas":[{"start":{"row":50,"column":5},"end":{"row":50,"column":6},"action":"remove","lines":["0"]}]}],[{"group":"doc","deltas":[{"start":{"row":50,"column":8},"end":{"row":51,"column":0},"action":"insert","lines":["",""]},{"start":{"row":51,"column":0},"end":{"row":51,"column":5},"action":"insert","lines":["    \t"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":5},"end":{"row":51,"column":6},"action":"insert","lines":["}"]},{"start":{"row":51,"column":0},"end":{"row":51,"column":5},"action":"remove","lines":["    \t"]},{"start":{"row":51,"column":0},"end":{"row":51,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":50,"column":7},"end":{"row":50,"column":8},"action":"remove","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":50,"column":7},"end":{"row":50,"column":8},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":5},"end":{"row":51,"column":6},"action":"insert","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":6},"end":{"row":51,"column":7},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":2,"column":0},"action":"remove","lines":["var pg            = require(\"pg\");","var database      = require('../database');",""]},{"start":{"row":33,"column":3},"end":{"row":50,"column":6},"action":"remove","lines":[" pg.connect(database.url_pg, function(err, client, done) {","\t   \tif(err) {","    \t\tconsole.log('connection error (Postgres):'+err);","    \t}","","    \tclient.query('select \"GroupId\" from \"GroupsUsers\" where \"UserId\"=$1', [user.id], function(err, result) {","    \t  if(err) { console.log(err) }","    \t  done();","    \t  ","    \t  var arrGrId = result.rows.map(function(object) { return object.GroupId });","    \t  groupModel.find({ id: { $in: arrGrId }  }, function(err, groups) {","          if (err) return callback(\"GroupDbError\");","          ","          callback(null, groups);","        });","    \t});","    });","    //"]},{"start":{"row":34,"column":3},"end":{"row":34,"column":6},"action":"remove","lines":[" //"]},{"start":{"row":35,"column":3},"end":{"row":35,"column":6},"action":"remove","lines":[" //"]},{"start":{"row":37,"column":3},"end":{"row":37,"column":6},"action":"remove","lines":[" //"]},{"start":{"row":38,"column":3},"end":{"row":38,"column":6},"action":"remove","lines":[" //"]}]}]]},"ace":{"folds":[],"customSyntax":"javascript","scrolltop":180,"scrollleft":0,"selection":{"start":{"row":33,"column":3},"end":{"row":33,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":170,"mode":"ace/mode/javascript"}},"hash":"e41e082d77ef6adfddb829e8a42d9834c6575b9d"}