<!doctype html>
<html>
  <head>
    <meta content='charset=UTF-8' />
    <title>InTask.me</title>
    
    <script type='text/javascript' src='js/jquery.min.js'></script>
		<script type='text/javascript' src='js/underscore.js'></script>
		<script type='text/javascript' src='js/backbone.js'></script>
		<script type='text/javascript' src='js/validator-min.js'></script>
    
    <script type='text/javascript' src='codebase/webix_debug.js' charset='utf-8'></script>
    <link href='codebase/skins/compact.css' rel='stylesheet' type='text/css'></link>
    <link href='css/style.css' rel='stylesheet' type='text/css'></link>
    
    <script type="text/javascript" src="js/main.js"></script>
  </head>
  
  <style>
  	div.friend_avatar {
		  width: 120px;
		  float: left;
	  }
	 	div.friend_avatar img {
	  	border: none;
	  }
	  
  	div.friend_info span {
  		display: block;
  		width: 64px;
  		font-weight: bold;
  		float: left;
  	}
  	.friend_info, .friend_avatar {
  		padding:8px;
  		line-height: 21px;
  	}	  
  	.mainSelector .webix_list_item {
	    line-height:50px;
    }
    .bless {
      border: none;
    }
    .authenticateError {
      font-style: italic;
    }
    /*.webix_tab_filler {*/
    /*  background-color: #ececec;*/
    /*}*/
    /*.webix_multiview {*/
    /*  background-color: #ececec;*/
    /*}*/
    /*.webix_spacer {*/
    /*  background-color: #ececec;*/
    /*}*/
    /*.webix_scrollview {*/
    /*  background-color: #ececec;*/
    /*}*/
  </style>
  
  <body>
	  <div id='frameBase'></div>
	    <div id='frameBlank'></div>
	    <div id='multiviewToolbar'></div>
        <div id='toolbarHeader'></div>
        <div id='toolbarAutorisation'></div>
          <div id='buttonAutorisationLogin'></div>
          <div id='buttonAutorisationRegister'></div>
  		<div id='multiviewLeft'></div>
  		  <div id='scrollviewLeft_Segments'></div>
  		    <div id='listSegments_SegmentsSelector'></div>
  		    <div id='listitemSegmentsSelector_MyProfile'></div>
  		<div id='multiviewCentral'></div>
  		  <div id='frameCentral_Greeting'></div>
  		  <div id='tabviewCentral_Groups'></div>
  		    <div id='frameGroups_Mygroups'></div>
  		      <div id='toolbarMyGroups_Groupstool'></div>
  		      <div id='treetableMyGroups_Groupstable'></div>
  		    <div id='frameGroups_Communitygroups'></div>
  		  <div id='tabviewCentral_Task'></div>
  		    <div id='frameTask_Mytasks'></div>
  		      <div id='toolbarMytasks_Tasktool'></div>
  		      <div id='treetableMytasks_Tasktable'></div>
  		    <div id='frameTask_Incomingtasks'></div>
  		    <div id='frameTask_Outcomingtasks'></div>
  		  <div id='frameCentral_Register'></div>
  		  <div id='frameCentral_Login'></div>
  		    <div id="formLogin"></div>
  		    <div id="formRegistration"></div>
    		<div id='frameCentral_Users'></div>
      		<div id='dataviewCentral_Users'></div>
      	 		<!--<div id="dataviewCentral_Users_template" style='display:none'>
          		<div class='friend_avatar'>
          			<img src='/img/avatars/#img#'>
          		</div>
          		<div class='friend_info'>
          			<div><span>Name:</span>#name#</div>
          			<div><span>Email:</span>#email#</div>
          		</div>
          	</div> -->
  		  <div id='tabviewCentral_User'></div>
  		    <div id='frameUser_Profile'></div>
		        <div id='frameProfile_user'></div>
    		      <div id='listProfile_UserAttributesSelector'></div>
    		      <div id='scrollviewProfile_UserAttributes'></div>
    		    <div id='frameProfile_viewedUser'></div>
    		      <div id='listProfile_viewedUserAttributesSelector'></div>
    		      <div id='scrollviewProfile_viewedUserAttributes'></div>
  		    <div id='frameUser_Albums'></div>
  		    <div id='frameUser_Achievements'></div>
  		    <div id='frameUser_Events'></div>
  		    <div id='frameUser_Message'></div>
  		<div id='multiviewRight'></div>
  		  <div id='scrollviewRight_UsersFilter'></div>
  		  <div id='scrollviewRight_UserFilter'></div>
  		  <div id='scrollviewRight_GroupsFilter'></div>
  	<div id='frameCentralLogin_authenticateError'></div>
  	<div id='frameCentralRegister_authenticateError'></div>

    <script type="text/javascript" charset="utf-8">
      var webix = window.webix;
	    window.App = {
	      State:      {},
	      User:       {},
  	    Frame:      {},//webix cfg frame
        Models:     {},//backbone models
        Func:       {},//functions
        Collections:{},//backbone collections in collection dir
        Trees:      {},
        WinSize:    {pageWidth:0, pageHeight:0, windowWidth:0, windowHeight:0}
      };

      window.App.GetWinSize = function() {
        var xScroll, yScroll;
        if (window.innerHeight && window.scrollMaxY) {
          xScroll = document.body.scrollWidth;
          yScroll = window.innerHeight + window.scrollMaxY;
        } else if (document.body.scrollHeight > document.body.offsetHeight){ // all but Explorer Mac
          xScroll = document.body.scrollWidth;
          yScroll = document.body.scrollHeight;
        } else if (document.documentElement && document.documentElement.scrollHeight > document.documentElement.offsetHeight){ // Explorer 6 strict mode
          xScroll = document.documentElement.scrollWidth;
          yScroll = document.documentElement.scrollHeight;
        } else { // Explorer Mac...would also work in Mozilla and Safari
          xScroll = document.body.offsetWidth;
          yScroll = document.body.offsetHeight;
        }
        
        var windowWidth, windowHeight;
        if (window.self.innerHeight) { // all except Explorer
          windowWidth = window.self.innerWidth;
          windowHeight = window.self.innerHeight;
        } else if (document.documentElement && document.documentElement.clientHeight) { // Explorer 6 Strict Mode
          windowWidth = document.documentElement.clientWidth;
          windowHeight = document.documentElement.clientHeight;
        } else if (document.body) { // other Explorers
          windowWidth = document.body.clientWidth;
          windowHeight = document.body.clientHeight;
        }

        var pageHeight, pageWidth;
        // for small pages with total height less then height of the viewport
        if(yScroll < windowHeight){
          pageHeight = windowHeight;
        } else {
          pageHeight = yScroll;
        }

        // for small pages with total width less then width of the viewport
        if(xScroll < windowWidth){
          pageWidth = windowWidth;
        } else {
          pageWidth = xScroll;
        }

        window.App.WinSize = { 'pageWidth':pageWidth, 'pageHeight':pageHeight, 'windowWidth':windowWidth, 'windowHeight':windowHeight };
      }();

      window.template = function(id) {
        return _.template( $('#' + id).html() );
      };
      
      webix.ui.fullScreen();
			webix.ready(implementFunction);
    </script>
    <script type="text/javascript" src='js/datefunctions.js'></script>
    <script type="text/javascript" src='js/models/task.js'></script>
    <script type="text/javascript" src='js/models/user.js'></script>
    <script type="text/javascript" src='js/models/group.js'></script>
    <script type="text/javascript" src='js/collections/tasks.js'></script>
    <script type="text/javascript" src='js/collections/groups.js'></script>
    <script type="text/javascript" src='js/views/allviews.js'></script>
    <script type="text/javascript" src='js/treemanager.js'></script>
  </body>
</html>