<!doctype html>
<html>
  <head>
    <meta content="charset=UTF-8" />
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <title>InTask.me</title>
    
    <script type="text/javascript" src="js/jquery.min.js"></script>
		<script type="text/javascript" src="js/underscore.js"></script>
		<script type="text/javascript" src="js/backbone.js"></script>
    
    <script type="text/javascript" src="codebase/webix_debug.js" charset="utf-8"></script>
    <link href="codebase/skins/web.css" rel="stylesheet" type="text/css">
    
    <script type="text/javascript" src="js/main.js"></script>
  </head>
  
  <style>
  	div.friend_avatar {
		  width: 120px;
		  float: left;
	  }
	 	div.friend_avatar img {
	  	border: none;
	  }
	  
  	div.friend_info span {
  		display: block;
  		width: 64px;
  		font-weight: bold;
  		float: left;
  	}
  	.friend_info, .friend_avatar {
  		padding:8px;
  		line-height: 21px;
  	}	  
  	.mainSelector .webix_list_item {
	    line-height:50px;
    }
    .bless {
      border: none;
    }
  </style>
  
  <body>
		<div id="masterframe"></div>
		<div id="headerframe"></div>
		<div id="greetingframe"></div>
		<div id="centralframe"></div>
		<div id="registerframe"></div>
		<div id="loginframe"></div>
		<div id="userframe"></div>
		<div id="leftframe" style='width:20%'></div>
		<div id="rightframe" style='width:20%'></div>
		
		<div id="sliceframe" style='width:20%'></div>

		<div id="slicegroupsframe"></div>
		<div id="gridgroupsframe"></div>
		<div id="sliceusersframe"></div>
		<div id="sliceprojectsframe"></div>
		<div id="inslicegroups"></div>
		<div id="slicetagsframe"></div>
		
		<div id="vbru"></div>
		
		<div id="loginForm"></div>
		
		<div id="friendlist_template" style='display:none'>
  		<div class='friend_avatar'>
  			<img src='img/avatars/#img#'/>
  		</div>
  		<div class='friend_info'>
  			<div><span>Name:</span>#name#</div>
  			<div><span>Email:</span>#email#</div>
  		</div>
  	</div>
	
    <script type="text/javascript" charset="utf-8">
      var webix = window.webix;
	    window.App = {
	      //user
  	    Frame:      {},//webix cfg frame
        Models:     {},//backbone models
        WebixViews: {},//webix views in views dir with 
        Views:      {},//backbone views in views dir
        Collections:{},//backbone collections in collection dir
        Trees:      {},
        WinSize:    {pageWidth:0, pageHeight:0, windowWidth:0, windowHeight:0}
       // Routes:     {} //backbone routes in main.js
      };

      window.App.GetWinSize = function() {
        var xScroll, yScroll;
        if (window.innerHeight && window.scrollMaxY) {
          xScroll = document.body.scrollWidth;
          yScroll = window.innerHeight + window.scrollMaxY;
        } else if (document.body.scrollHeight > document.body.offsetHeight){ // all but Explorer Mac
          xScroll = document.body.scrollWidth;
          yScroll = document.body.scrollHeight;
        } else if (document.documentElement && document.documentElement.scrollHeight > document.documentElement.offsetHeight){ // Explorer 6 strict mode
          xScroll = document.documentElement.scrollWidth;
          yScroll = document.documentElement.scrollHeight;
        } else { // Explorer Mac...would also work in Mozilla and Safari
          xScroll = document.body.offsetWidth;
          yScroll = document.body.offsetHeight;
        }
        
        var windowWidth, windowHeight;
        if (window.self.innerHeight) { // all except Explorer
          windowWidth = window.self.innerWidth;
          windowHeight = window.self.innerHeight;
        } else if (document.documentElement && document.documentElement.clientHeight) { // Explorer 6 Strict Mode
          windowWidth = document.documentElement.clientWidth;
          windowHeight = document.documentElement.clientHeight;
        } else if (document.body) { // other Explorers
          windowWidth = document.body.clientWidth;
          windowHeight = document.body.clientHeight;
        }

        var pageHeight, pageWidth;
        // for small pages with total height less then height of the viewport
        if(yScroll < windowHeight){
          pageHeight = windowHeight;
        } else {
          pageHeight = yScroll;
        }

        // for small pages with total width less then width of the viewport
        if(xScroll < windowWidth){
          pageWidth = windowWidth;
        } else {
          pageWidth = xScroll;
        }

        window.App.WinSize = { 'pageWidth':pageWidth, 'pageHeight':pageHeight, 'windowWidth':windowWidth, 'windowHeight':windowHeight };
      }();

      webix.ui.fullScreen();
			webix.ready(implementFunction);
    </script>
    <script type="text/javascript" src='js/models/task.js'></script>
    <script type="text/javascript" src='js/models/user.js'></script>
    <script type="text/javascript" src='js/models/group.js'></script>
    <script type="text/javascript" src='js/collections/tasks.js'></script>
    <script type="text/javascript" src='js/collections/groups.js'></script>
    <script type="text/javascript" src='js/views/dview.js'></script>
    <script type="text/javascript" src='js/views/wmasterview.js'></script>
  </body>
</html>